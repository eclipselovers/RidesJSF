<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<f:view>
	<h:head>
		<title>Queary Rides</title>
	</h:head>
	<h:body>
		<h:form>
			<h2>Queary Rides</h2>
			<table>
				<tr>
					<td>Origin:</td>
					<td><h:selectOneMenu id="origin"
							value="#{quearyRideBean.origin}">
							<f:selectItems value="#{quearyRideBean.originList}" />
							<f:ajax event="change" render="destination" />
						</h:selectOneMenu></td>

				</tr>
				<tr>
					<td>Destination:</td>
					<td><h:selectOneMenu id="destination"
							value="#{quearyRideBean.destination}">
							<f:selectItems value="#{quearyRideBean.destinationList}" />
						</h:selectOneMenu></td>
				</tr>
				<tr>
					<td>Date:</td>
					<td><h:inputText id="date"
							value="#{quearyRideBean.dateString}">
							<f:passThroughAttribute name="type" value="date" />
						</h:inputText></td>
				</tr>
			</table>

			<p>
				<h:commandButton value="Search" action="#{quearyRideBean.search}" />
				<!-- Close button to navigate to index.xhtml without submitting -->
				<h:button value="Close" outcome="/index.xhtml" />
			</p>

			<h:panelGroup rendered="#{not empty quearyRideBean.results}">
				<h3>Results:</h3>
				<h:dataTable value="#{quearyRideBean.results}" var="r" border="1">
					<h:column>
						<f:facet name="header">From</f:facet>
						<h:outputText value="#{r.from}" />
					</h:column>
					<h:column>
						<f:facet name="header">To</f:facet>
						<h:outputText value="#{r.to}" />
					</h:column>
					<h:column>
						<f:facet name="header">Date</f:facet>
						<h:outputText value="#{r.date}">
							<f:convertDateTime pattern="yyyy-MM-dd" />
						</h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">Seats</f:facet>
						<h:outputText value="#{r.nPlaces}" />
					</h:column>
					<h:column>
						<f:facet name="header">Price</f:facet>
						<h:outputText value="#{r.price}" />
					</h:column>
				</h:dataTable>
			</h:panelGroup>

		</h:form>
	</h:body>
</f:view>
</html>